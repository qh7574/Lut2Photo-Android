# 水印设置参数详解

本文档详细说明 Lut2Photo 应用中水印功能的所有参数及其使用方法。
Lut2Photo内置了一套完整而强大的边框水印系统，旨在快速为不同尺寸的图片批量创建视觉上高度统一的艺术效果，可以满足大部分的边框水印需求。

---

## 目录

1. [基础设置](#基础设置)
2. [文字水印设置](#文字水印设置)
3. [图片水印设置](#图片水印设置)
4. [位置与布局](#位置与布局)
5. [边框设置](#边框设置)
6. [高级设置](#高级设置)
7. [EXIF 变量参考](#exif-变量参考)
8. [使用示例](#使用示例)

---

## 基础设置

### 启用水印
- **参数名**: `isEnabled`
- **类型**: 开关
- **默认值**: 关闭
- **说明**: 总开关，控制是否在处理后的图片上添加水印

### 启用文字水印
- **参数名**: `enableTextWatermark`
- **类型**: 开关
- **默认值**: 开启
- **说明**: 控制是否显示文字水印

### 启用图片水印
- **参数名**: `enableImageWatermark`
- **类型**: 开关
- **默认值**: 关闭
- **说明**: 控制是否显示图片水印（如 Logo）

---

## 文字水印设置

### 文字内容
- **参数名**: `textContent`
- **类型**: 文本输入
- **默认值**: `"拍摄参数：ISO {ISO} 光圈 f/{APERTURE} 快门 {SHUTTER}"`
- **说明**: 水印文字内容，支持 EXIF 变量替换（见 [EXIF 变量参考](#exif-变量参考)）
- **示例**:
  - `"拍摄参数：ISO {ISO} 光圈 f/{APERTURE} 快门 {SHUTTER}"`
  - `"{CAMERA_MODEL} | {LENS_MODEL}"`
  - `"LUT: {LUT1} ({LUT1_STRENGTH}%)"`

### 文字大小
- **参数名**: `textSize`
- **类型**: 滑块
- **范围**: 0% - 100%
- **默认值**: 8%
- **说明**: 整行文字大小相对于图片宽度的百分比
- **建议值**:
  - 小文字: 8% - 10%
  - 中等文字: 15% - 20%
  - 大文字: 40% - 50%

### 文字颜色
- **参数名**: `textColor`
- **类型**: 颜色选择器
- **默认值**: `#FFFFFF` (白色)
- **说明**: 文字颜色，支持 16 进制颜色代码，点击通过颜色选择器进行选择

### 文字透明度
- **参数名**: `textOpacity`
- **类型**: 滑块
- **范围**: 0% - 100%
- **默认值**: 80%
- **说明**: 文字的不透明度，0% 为完全透明，100% 为完全不透明
- **建议值**:
  - 半透明效果: 40% - 60%
  - 标准可见: 70% - 90%
  - 完全不透明: 100%

### 字体文件
- **参数名**: `fontPath`
- **类型**: 文件选择器
- **默认值**: 空（使用系统默认字体）
- **说明**: 自定义字体文件路径，支持 TTF 和 OTF 格式
- **使用方法**: 点击"选择字体"按钮，从设备中选择字体文件

### 文本对齐方式
- **参数名**: `textAlignment`
- **类型**: 单选
- **选项**:
  - `LEFT`: 左对齐
  - `CENTER`: 居中对齐（默认）
  - `RIGHT`: 右对齐
- **说明**: 多行文字时的对齐方式

### 字间距
- **参数名**: `letterSpacing`
- **类型**: 滑块
- **范围**: -100% - 400%
- **步进**: 10%
- **默认值**: 0%
- **说明**: 字符之间的间距，使用单个文字宽度的百分比
- **效果**:
  - 负值: 字符重叠
  - 0%: 正常间距
  - 正值: 字符分散

### 行间距
- **参数名**: `lineSpacing`
- **类型**: 滑块
- **范围**: -100% - 400%
- **步进**: 10%
- **默认值**: 0%
- **说明**: 行与行之间的间距，使用单个文字高度的百分比
- **效果**:
  - 负值: 行重叠
  - 0%: 正常间距
  - 正值: 行分散

---

## 图片水印设置

### 水印图片路径
- **参数名**: `imagePath`
- **类型**: 相册
- **默认值**: 空
- **说明**: 水印图片文件路径，支持 PNG、JPG 等格式，点击后弹出系统相册进行选择
- **建议**: 使用带透明背景的 PNG 图片效果最佳

### 图片大小
- **参数名**: `imageSize`
- **类型**: 滑块
- **范围**: 0% - 100%
- **默认值**: 10%
- **说明**: 图片水印大小相对于图片宽度的百分比
- **建议值**:
  - 小 Logo: 5% - 10%
  - 中等 Logo: 11% - 20%
  - 大 Logo: 21% - 30%

### 图片透明度
- **参数名**: `imageOpacity`
- **类型**: 滑块
- **范围**: 0% - 100%
- **默认值**: 80%
- **说明**: 图片水印的不透明度
- **建议值**:
  - 淡水印: 30% - 50%
  - 标准可见: 60% - 80%
  - 完全不透明: 100%

---

## 位置与布局

### 文字水印位置

#### X 轴位置
- **参数名**: `textPositionX`
- **类型**: 滑块
- **范围**: 0% - 100%
- **默认值**: 50%
- **说明**: 文字水印的水平位置，以段落文字中心为基准，0% 为最左侧，100% 为最右侧

#### Y 轴位置
- **参数名**: `textPositionY`
- **类型**: 滑块
- **范围**: 0% - 100%
- **默认值**: 90%
- **说明**: 文字水印的垂直位置，以段落文字中心为基准，0% 为最顶部，100% 为最底部

### 图片水印位置

#### X 轴位置
- **参数名**: `imagePositionX`
- **类型**: 滑块
- **范围**: 0% - 100%
- **默认值**: 50%
- **说明**: 图片水印的水平位置

#### Y 轴位置
- **参数名**: `imagePositionY`
- **类型**: 滑块
- **范围**: 0% - 100%
- **默认值**: 10%
- **说明**: 图片水印的垂直位置

### 常用位置预设

| 位置 | X 轴 | Y 轴 | 说明 |
|------|------|------|------|
| 左上角 | 5% | 5% | 适合 Logo |
| 右上角 | 95% | 5% | 适合 Logo |
| 左下角 | 5% | 95% | 适合签名 |
| 右下角 | 95% | 95% | 适合签名 |
| 居中 | 50% | 50% | 适合大水印 |
| 底部居中 | 50% | 90% | 适合参数信息 |

### 文字跟随模式

#### 启用文字跟随
- **参数名**: `enableTextFollowMode`
- **类型**: 开关
- **默认值**: 关闭
- **说明**: 启用后，文字水印会跟随图片水印的位置

#### 跟随方向
- **参数名**: `textFollowDirection`
- **类型**: 单选
- **选项**:
  - `TOP`: 文字在图片上方
  - `BOTTOM`: 文字在图片下方（默认）
  - `LEFT`: 文字在图片左侧
  - `RIGHT`: 文字在图片右侧
- **说明**: 文字相对于图片水印的位置

#### 文字与图片间距
- **参数名**: `textImageSpacing`
- **类型**: 滑块
- **范围**: -500% - 500%
- **步进**: 50%
- **默认值**: 100%
- **说明**: 文字水印与图片水印之间的距离，使用单个文字宽度的百分比
- **效果**:
  - 负值: 文字与图片重叠
  - 0%: 文字紧贴图片
  - 正值: 文字与图片分离

---

## 边框设置

### 边框宽度

应用支持四个方向独立控制边框宽度：

#### 上边框宽度
- **参数名**: `borderTopWidth`
- **类型**: 滑块
- **范围**: 0% - 150%
- **默认值**: 0%
- **说明**: 上边框宽度相对于图片宽度的百分比

#### 下边框宽度
- **参数名**: `borderBottomWidth`
- **类型**: 滑块
- **范围**: 0% - 150%
- **默认值**: 0%
- **说明**: 下边框宽度相对于图片宽度的百分比

#### 左边框宽度
- **参数名**: `borderLeftWidth`
- **类型**: 滑块
- **范围**: 0% - 150%
- **默认值**: 0%
- **说明**: 左边框宽度相对于图片宽度的百分比

#### 右边框宽度
- **参数名**: `borderRightWidth`
- **类型**: 滑块
- **范围**: 0% - 150%
- **默认值**: 0%
- **说明**: 右边框宽度相对于图片宽度的百分比

### 边框颜色模式

#### 颜色模式
- **参数名**: `borderColorMode`
- **类型**: 单选
- **选项**:
  - `MANUAL`: 手动选择颜色（默认）
  - `PALETTE`: 从图片自动提取颜色
  - `MATERIAL`: Material Design 颜色
- **说明**: 边框颜色的选择方式

#### 边框颜色
- **参数名**: `borderColor`
- **类型**: 颜色选择器/Material3动态取色
- **默认值**: `#000000` (黑色)
- **说明**: 边框颜色，若使用Material3动态取色，会根据图片根据选择的风格动态应用颜色（每张照片不同），需要先选择预览图片后选择风格


### 边框使用场景

| 场景 | 上 | 下 | 左 | 右 | 说明 |
|------|----|----|----|----|------|
| 无边框 | 0% | 0% | 0% | 0% | 默认 |
| 底部边框 | 0% | 10% | 0% | 0% | 适合添加参数信息 |
| 全边框 | 5% | 5% | 5% | 5% | 相框效果 |
| 宽屏边框 | 10% | 10% | 0% | 0% | 电影感 |
| 方形边框 | 10% | 10% | 10% | 10% | Instagram 风格 |

---

## 高级设置

### 配置导入导出

应用支持导入和导出水印配置，方便在不同设备间共享设置或备份配置。

#### 导出配置
1. 点击"导出配置"按钮
2. 选择保存位置
3. 配置将保存为 ZIP 文件（包含图片水印和字体）

#### 导入配置
1. 点击"导入配置"按钮
2. 选择之前导出的配置文件
3. 配置将自动应用

### 独立配置

**实时处理和手动处理共用水印配置，但可以分开控制总开关。**

---

## EXIF 变量参考

在文字水印内容中，可以使用以下变量，应用会自动替换为实际的 EXIF 数据：

### 拍摄参数

| 变量 | 说明 | 示例值 |
|------|------|--------|
| `{ISO}` | ISO 感光度 | `100`, `400`, `1600` |
| `{APERTURE}` | 光圈值 | `2.8`, `5.6`, `11` |
| `{SHUTTER}` | 快门速度 | `1/125`, `1/1000`, `2"` |
| `{FOCAL_LENGTH}` | 焦距 | `24mm`, `50mm`, `85mm` |
| `{EXPOSURE_COMPENSATION}` | 曝光补偿 | `+0.3`, `-1.0`, `0` |

### 设备信息

| 变量 | 说明 | 示例值 |
|------|------|--------|
| `{CAMERA_MODEL}` | 相机型号 | `Canon EOS R5`, `Sony A7III` |
| `{LENS_MODEL}` | 镜头型号 | `RF 24-70mm F2.8`, `FE 85mm F1.4` |

### 时间信息

| 变量 | 说明 | 示例值 |
|------|------|--------|
| `{DATE}` | 拍摄日期 | `2025-01-12` |
| `{TIME}` | 拍摄时间 | `13:24:15` |

### 其他参数

| 变量 | 说明 | 示例值 |
|------|------|--------|
| `{WHITE_BALANCE}` | 白平衡 | `自动`, `日光`, `阴天` |
| `{FLASH}` | 闪光灯 | `未闪光`, `已闪光` |

### LUT 信息

| 变量 | 说明 | 示例值 |
|------|------|--------|
| `{LUT1}` | 第一个 LUT 名称 | `PROVIA`, `VELVIA` |
| `{LUT2}` | 第二个 LUT 名称 | `Eterna`, `ClassicChrome` |
| `{LUT1_STRENGTH}` | 第一个 LUT 强度 | `100%`, `80%` |
| `{LUT2_STRENGTH}` | 第二个 LUT 强度 | `50%`, `100%` |

### 变量使用示例

```
拍摄参数：ISO {ISO} 光圈 f/{APERTURE} 快门 {SHUTTER}
→ 拍摄参数：ISO 400 光圈 f/2.8 快门 1/125

{CAMERA_MODEL} | {LENS_MODEL}
→ Canon EOS R5 | RF 24-70mm F2.8

{DATE} {TIME} | {FOCAL_LENGTH} | ISO {ISO}
→ 2025-01-12 13:24:15 | 50mm | ISO 400

LUT: {LUT1} ({LUT1_STRENGTH}%) + {LUT2} ({LUT2_STRENGTH}%)
→ LUT: PROVIA (100%) + Eterna (50%)
```

---

## 使用示例

### 示例 1: 简单参数水印

**场景**: 在照片底部添加拍摄参数

**配置**:
- 启用文字水印: ✓
- 文字内容: `ISO {ISO} | f/{APERTURE} | {SHUTTER} | {FOCAL_LENGTH}`
- 文字大小: 6%
- 文字颜色: 白色 `#FFFFFF`
- 文字透明度: 80%
- 文字位置: X=50%, Y=95%
- 文本对齐: 居中

**效果**: 在照片底部居中显示拍摄参数，半透明白色文字

---

### 示例 2: Logo + 签名

**场景**: 在照片右下角添加 Logo 和签名

**配置**:
- 启用图片水印: ✓
- 图片路径: 选择 Logo 文件
- 图片大小: 8%
- 图片透明度: 70%
- 图片位置: X=95%, Y=95%
- 启用文字水印: ✓
- 启用文字跟随: ✓
- 跟随方向: 左侧
- 文字内容: `© 2025 摄影师名字`
- 文字大小: 4%

**效果**: Logo 在右下角，签名文字在 Logo 左侧

---

### 示例 3: 电影感边框

**场景**: 添加上下黑边，营造电影感

**配置**:
- 上边框宽度: 12%
- 下边框宽度: 12%
- 左边框宽度: 0%
- 右边框宽度: 0%
- 边框颜色: 黑色 `#000000`
- 启用文字水印: ✓
- 文字内容: `{CAMERA_MODEL} | {LENS_MODEL} | {FOCAL_LENGTH} f/{APERTURE} ISO {ISO} {SHUTTER}`
- 文字位置: X=50%, Y=97%
- 文字颜色: 白色
- 文字大小: 5%

**效果**: 上下黑边，底部居中显示设备和拍摄信息

---

### 示例 4: 完整信息水印

**场景**: 在照片底部边框中显示完整拍摄信息

**配置**:
- 下边框宽度: 15%
- 边框颜色: 深灰 `#1A1A1A`
- 启用文字水印: ✓
- 文字内容:
  ```
  {CAMERA_MODEL} + {LENS_MODEL}
  {DATE} {TIME} | {FOCAL_LENGTH} | f/{APERTURE} | {SHUTTER} | ISO {ISO}
  LUT: {LUT1} ({LUT1_STRENGTH}%)
  ```
- 文字位置: X=50%, Y=93%
- 文字颜色: 白色
- 文字大小: 4%
- 行间距: 20%
- 文本对齐: 居中

**效果**: 底部深灰色边框，三行居中文字显示完整信息

---

### 示例 5: 自定义字体艺术签名

**场景**: 使用自定义字体添加艺术签名

**配置**:
- 启用文字水印: ✓
- 文字内容: `Your Name Photography`
- 字体文件: 选择手写体或艺术字体
- 文字大小: 8%
- 文字颜色: 金色 `#FFD700`
- 文字透明度: 60%
- 文字位置: X=50%, Y=50%
- 字间距: 50%

**效果**: 居中显示艺术字体签名，金色半透明，字符间距较大

---

## 注意事项

1. **性能考虑**: 过大的水印边框会影响处理速度
2. **可读性**: 确保文字颜色与背景有足够的对比度
3. **版权保护**: 合理使用水印可以保护作品版权
4. **预览功能**: 使用预览功能实时查看水印效果
5. **配置备份**: 通过导入和导出快速切换水印配置文件
6. **字体版权**: 使用自定义字体时注意字体的版权和授权

---

## 技术说明

- 所有百分比参数都是相对于图片尺寸计算的，确保在不同分辨率下保持一致的视觉效果
- 颜色支持 16 进制格式（如 `#FFFFFF`）和 ARGB 格式
- 字体文件支持 TTF 和 OTF 格式
- 水印图片建议使用 PNG 格式以支持透明背景
- EXIF 变量在图片不包含对应数据时会显示为空或默认值


